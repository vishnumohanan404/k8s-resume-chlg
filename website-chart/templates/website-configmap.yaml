apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-feature-toggle-config
data:
  FEATURE_DARK_MODE: "true"
---
apiVersion: v1
kind: ConfigMap
metadata:
 name: {{ .Release.Name }}-mariadb-configmap
data:
 db-load-script.sql: |
  SELECT 'Starting database creation...' AS status;
  CREATE DATABASE $(DB_NAME);
  SELECT 'Database created.' AS status;
  CREATE USER '$(DB_USER)'@'$(DB_HOST)' IDENTIFIED BY '$(DB_PASSWORD)';
  SELECT 'User created.' AS status;
  GRANT ALL PRIVILEGES ON $(DB_NAME).* TO '$(DB_USER)'@'%'
  FLUSH PRIVILEGES;
  SELECT 'Privileges granted.' AS status;
  USE $(DB_NAME);
  CREATE TABLE products (id mediumint(8) unsigned NOT NULL auto_increment,Name varchar(255) default NULL,Price varchar(255) default NULL, ImageUrl varchar(255) default NULL,PRIMARY KEY (id)) AUTO_INCREMENT=1;
  INSERT INTO products (Name,Price,ImageUrl) VALUES ("Laptop","100","c-1.png"),("Drone","200","c-2.png"),("VR","300","c-3.png"),("Tablet","50","c-5.png"),("Watch","90","c-6.png"),("Phone Covers","20","c-7.png"),("Phone","80","c-8.png"),("Laptop","150","c-4.png");
  SELECT 'Products inserted.' AS status;